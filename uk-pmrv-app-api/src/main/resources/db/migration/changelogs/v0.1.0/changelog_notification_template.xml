<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
		logicalFilePath="v0.1.0/changelog_notification_template.xml"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.11.xsd">

    <changeSet id="0_1_0_CREATE_TABLE_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr" context="migrate">

        <comment>CREATE notification_template TABLE</comment>
        <sql>
            CREATE SEQUENCE notification_template_seq MINVALUE 0 MAXVALUE 999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 1 NO CYCLE;

            CREATE TABLE notification_template (
            id bigint,
            name VARCHAR(255) NOT NULL,
            subject VARCHAR(255) NOT NULL,
            text TEXT NOT NULL);

            ALTER TABLE notification_template ADD CONSTRAINT notification_template_pk PRIMARY KEY (id);
            ALTER TABLE notification_template ADD CONSTRAINT notification_template_uc UNIQUE (name);

            COMMENT ON TABLE notification_template IS 'Stores information about notification templates';
            COMMENT ON COLUMN notification_template.name IS 'The notification template name';
            COMMENT ON COLUMN notification_template.subject IS 'The notification template subject';
            COMMENT ON COLUMN notification_template.text IS 'The notification template text';

        </sql>

        <rollback>
            <sql>
                DROP TABLE IF EXISTS notification_template CASCADE;
                DROP SEQUENCE IF EXISTS notification_template_seq;
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_EMAIL_CONFIRMATION_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr" context="migrate">

        <comment>Insert record in notification_template Table for Email Confirmation</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text
            )
			VALUES (
			nextval('notification_template_seq'),
			'EmailConfirmation',
			'Confirm your email address - PMRV',
			'Thank you for starting the registration process with Permitting, Monitoring, Reporting,
Verification system (PMRV).

To confirm your email address, please click on the following link:

[Verify your email address and continue with the registration process](${emailConfirmationLink})

If you did not request this verification email, contact the PMRV at info@pmrv.com.

Do not reply, this is an automatic email.'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'EmailConfirmation';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_EMAIL_USER_ACCOUNT_CREATED_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr" context="migrate">

        <comment>Insert record in notification_template Table for User Account Created email</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'UserAccountCreated',
			'User account created - PMRV',
			'Dear ${userFirstName} ${userLastName},

This is to notify you that a user account has been created in PMRV for the below company contact details:

First name: ${userFirstName}

Last name: ${userLastName}

Email address: ${userEmail}

You will be asked to provide this email address if you forget your password or want to change your password.

Kind Regards,

PMRV Helpdesk'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'UserAccountCreated';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_EMAIL_ACCOUNT_APPLICATION_RECEIVED_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr" context="migrate">

        <comment>Insert record in notification_template Table for Account Application Received email</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'AccountApplicationReceived',
			'PMRV account application received',
			'Dear ${applicantFirstName} ${applicantLastName},

Thank you for applying to set up a PMRV account.

We’ll check your application, then let you know if you’ve been successful within 10 working days.

Regards,

${competentAuthorityName}'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'AccountApplicationReceived';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_EMAIL_ACCOUNT_APPLICATION_ACCEPTED_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr" context="migrate">

        <comment>Insert record in notification_template Table for Account Application Accepted email</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'AccountApplicationAccepted',
			'PMRV account application update',
			'Dear ${applicantFirstName} ${applicantLastName},

Your application to set up a PMRV account has been successful.

Sign in to your PMRV account to:
- apply for a GHG permit
- send and receive notifications from your regulator

Contact ${competentAuthorityName} for help:
${competentAuthorityEmail}
${competentAuthorityPhone}

Regards,
PMRV'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'AccountApplicationAccepted';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_EMAIL_ACCOUNT_APPLICATION_REJECTED_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr" context="migrate">

        <comment>Insert record in notification_template Table for Account Application Rejected email</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'AccountApplicationRejected',
			'PMRV account application update',
			'Dear ${applicantFirstName} ${applicantLastName},

Sorry, your application to set up a PMRV account has not been successful.

This is because ${reason}.

You can apply to set up a PMRV account again on GOV.UK.

Contact ${competentAuthorityName} for help:
${competentAuthorityEmail}
${competentAuthorityPhone}

Regards,
PMRV'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'AccountApplicationRejected';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_ACCOUNT_USERS_SETUP_MESSAGE_NOTIFICATION_TEMPLATE" author="p70366@trasys.gr" context="migrate">

        <comment>Insert record in notification_template for Account Users Setup Message</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'AccountUsersSetup',
			'Set up additional user on your account',
			'You are currently the Admin user on your account.

You can add additional Admin users, other Operator users, Consultants or Verifiers.

Users can be managed at any time from your Dashboard by selecting "Manage users, contacts or verifiers"

or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId}})'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'AccountUsersSetup';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_INVITATION_TO_OPERATOR_ACCOUNT_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr" context="migrate">

        <comment>Insert record in notification_template for Invitation To Operator Account</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'InvitationToOperatorAccount',
			'PMRV new user',
			'You have been invited to the PMRV system to become ${userRoleType} for ${installationAccountName}.

To claim and activate your account you must click the link below within 72 hours.

If you are an existing user you will be required to log into the PMRV system with your credentials.

If you are a new user, you will be sent an email requesting you to validate your email and to complete the user account creation process before your account is activated.

[Confirm your account now](${operatorInvitationConfirmationLink})'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'InvitationToOperatorAccount';
            </sql>
        </rollback>

    </changeSet>
    
    <changeSet id="0_1_0_INSERT_INVITATION_TO_REGULATOR_NOTIFICATION_TEMPLATE" author="P35066">
        <comment>Insert record in notification_template for Invitation To Regulator</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id, name, subject, text)
			VALUES (
			nextval('notification_template_seq'),
			'InvitationToRegulatorAccount',
			'Activate your PMRV account',
			'${applicantFirstName} ${applicantLastName}

An account has been created for you.

To claim and activate your account you must click the link below within 72 hours.

You will be asked to create a password.

[Activate your account now](${regulatorInvitationConfirmationLink})'
            )]]>;
        </sql>
        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'InvitationToRegulatorAccount';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_INSERT_INVITATION_TO_VERIFIER_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr">
        <comment>Insert record in notification_template for Invitation To Verifier</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id, name, subject, text)
			VALUES (
			nextval('notification_template_seq'),
			'InvitationToVerifierAccount',
			'Activate your PMRV account',
			'${applicantFirstName} ${applicantLastName},

An account has been created for you.

To claim and activate your account you must click the link below within 72 hours.

You will be asked to create a password.

[Activate your account now](${verifierInvitationConfirmationLink})'
            )]]>;
        </sql>
        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'InvitationToVerifierAccount';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_INSERT_NEW_USER_CONFIRMED_MESSAGE_NOTIFICATION_TEMPLATE" author="P35066">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'NewUserConfirmed',
			'New user confirmed',
			'The account of ${userFullName} is confirmed.

Users can be managed at any time from your Dashboard by selecting "Manage users, contacts or verifiers"

or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId}})'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'NewUserConfirmed';
            </sql>
        </rollback>

    </changeSet>
    
    <changeSet id="0_1_0_INSERT_NEW_VERIFICATION_BODY_INSTALLATION_MESSAGE_NOTIFICATION_TEMPLATE" author="P35066">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'NewVerificationBodyInstallation',
			'New Installation',
			'${operatorName} has appointed your organisation as the verifier for ${accountName}.

You can manage the individual who is assigned as the site contact by navigating to Manage verifier users.

You can assign and re-assign site contacts at any time.'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'NewVerificationBodyInstallation';
            </sql>
        </rollback>

    </changeSet>
    
    <changeSet id="0_1_0_INSERT_VERIFIER_NO_LONGER_AVAILABLE_MESSAGE_NOTIFICATION_TEMPLATE" author="P35066">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'VerifierNoLongerAvailable',
			'Verifier is no longer available',
			'The verifier you have appointed at your installation has been removed or suspended by the regulator and is no longer available.

You can appoint a new verifier at any time from your dashboard by selecting "Manage users, contacts or verifiers" or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId}}).

If you do not appoint a verifier now, you will be reminded at the end of each calendar year and prior to the deadline for submission of your Annual Emission Monitoring report that you must appoint a verifier.'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'VerifierNoLongerAvailable';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_INVITATION_TO_EMITTER_CONTACT_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr">

        <comment>Insert record in notification_template for Invitation To Emitter Contact</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'InvitationToEmitterContact',
			'PMRV invitation to emitter contact',
			'Dear ${applicantFirstName} ${applicantLastName}

This is to notify you that you have been created as an Emitter contact at ${installationAccountName}.

All system alerts, notices and official communications will be sent to your registered email address.

Notices and official communications will be sent by post to your registered address.

Kind regards,
PMRV Helpdesk'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'InvitationToEmitterContact';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_EDIT_NEW_VERIFICATION_BODY_INSTALLATION_MESSAGE_NOTIFICATION_TEMPLATE" author="P70366">
        <sql>
            UPDATE notification_template SET TEXT=
			'${operatorName} has appointed your organisation as the verifier for ${accountName}.

You can manage the individual who is assigned as the site contact by navigating to [Manage verifier users]({"action": "VERIFICATION_BODY_USERS_SETUP"}).

You can assign and re-assign site contacts at any time.'
WHERE NAME = 'NewVerificationBodyInstallation';
        </sql>

        <rollback>
            <sql>
            UPDATE notification_template SET TEXT=
			'${operatorName} has appointed your organisation as the verifier for ${accountName}.

You can manage the individual who is assigned as the site contact by navigating to Manage verifier users.

You can assign and re-assign site contacts at any time.'
WHERE NAME = 'NewVerificationBodyInstallation';
            </sql>
        </rollback>

    </changeSet>
    
    
    <changeSet id="0_1_0_UPDATE_MESSAGE_NOTIFICATION_TEMPLATE_REMOVE_DOUBLE_QUOTES_FROM_MANAGE_USERS_CONTACTS_OR_VERIFIERS_TEXT" author="P35066">
        <comment>Remove double quotes from manage users, contacts or verifiers text</comment>
        <sql>
            update notification_template set text =
			'You are currently the Admin user on your account.

You can add additional Admin users, other Operator users, Consultants or Verifiers.

Users can be managed at any time from your Dashboard by selecting ''Manage users, contacts or verifiers''

or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId}})'
			where name = 'AccountUsersSetup';
			
			update notification_template set text =
			'The account of ${userFullName} is confirmed.

Users can be managed at any time from your Dashboard by selecting ''Manage users, contacts or verifiers''

or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId}})'
			where name = 'NewUserConfirmed';
			
			update notification_template set text =
			'The verifier you have appointed at your installation has been removed or suspended by the regulator and is no longer available.

You can appoint a new verifier at any time from your dashboard by selecting ''Manage users, contacts or verifiers'' or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId}}).

If you do not appoint a verifier now, you will be reminded at the end of each calendar year and prior to the deadline for submission of your Annual Emission Monitoring report that you must appoint a verifier.'
			where name = 'VerifierNoLongerAvailable';
        </sql>

        <rollback></rollback>
    </changeSet>

    <changeSet id="0_1_0_INSERT_CHANGE_2FA_MESSAGE_NOTIFICATION_TEMPLATE" author="pafilisa@unisystems.gr">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'Change2FA',
			'Change two factor authentication',
			'Use this link to sign in to the PMRV and update your authenticator app:

[Sign in and set up new two factor authentication](${change2FALink})

This link will expire in 5 minutes.

If you did not request this change you must contact the PMRV.

This is an automatic email - please do not reply to this address.'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'Change2FA';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_EDIT_CHANGE_2FA_MESSAGE_NOTIFICATION_TEMPLATE_WITH_CONTACT" author="P70383">
        <sql>
            UPDATE notification_template
            SET TEXT= 'Use this link to sign in to the PMRV and update your authenticator app:

[Sign in and set up new two factor authentication](${change2FALink})

This link will expire in 5 minutes.

If you did not request this change you must contact the PMRV at ${officialPmrvContact}.

This is an automatic email - please do not reply to this address.',
            SUBJECT = 'Two factor authentication device update request - PMRV'
            WHERE NAME = 'Change2FA';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template
                SET TEXT= 'Use this link to sign in to the PMRV and update your authenticator app:

[Sign in and set up new two factor authentication](${change2FALink})

This link will expire in 5 minutes.

If you did not request this change you must contact the PMRV.

This is an automatic email - please do not reply to this address.',
                SUBJECT = 'Change two factor authentication'
                WHERE NAME = 'Change2FA';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_INVITEE_INVITATION_ACCEPTED_NOTIFICATION_TEMPLATE" author="P70383">
        <comment>Add InviteeInvitationAccepted template</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'InviteeInvitationAccepted',
			'User account activation',
			'Dear ${userRoleType},

This is to notify you that your PMRV user account is now accepted.'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'InviteeInvitationAccepted';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_INVITER_INVITATION_ACCEPTED_NOTIFICATION_TEMPLATE" author="P70383">
        <comment>Add InviterInvitationAccepted template</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'InviterInvitationAccepted',
			'User account activation',
			'Dear ${userFirstName} ${userLastName},

This is to notify you that ${userInviteeFirstName} ${userInviteeLastName} has accepted the invitation.'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'InviterInvitationAccepted';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_DELETE_NEW_USER_CONFIRMED_NOTIFICATION_TEMPLATE" author="P70383">
        <comment>Delete NewUserConfirmed template</comment>
        <sql>
            DELETE FROM notification_template WHERE name = 'NewUserConfirmed';
        </sql>

        <rollback>
            <sql>
                <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'NewUserConfirmed',
			'New user confirmed',
			'The account of ${userFullName} is confirmed.

Users can be managed at any time from your Dashboard by selecting 'Manage users, contacts or verifiers'

or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId}})'
            )]]>;
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_INSERT_USER_ACCOUNT_ACTIVATION_NOTIFICATION_TEMPLATE" author="P70383">
        <comment>Add UserAccountActivation template</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
            id,
            name,
            subject,
            text)
			VALUES (
			nextval('notification_template_seq'),
			'UserAccountActivation',
			'User account activation',
			'Dear ${userRoleType},

This is to notify you that your PMRV user account is now active.

You can log in using the details provided at your account creation.'
            )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'UserAccountActivation';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_EDIT_INVITATION_TO_OPERATOR_ACCOUNT_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            'You have been invited to the PMRV system to become ${userRoleType} for ${installationAccountName}.

            To claim and activate your account you must click the link below within ${expirationMinutes/60} hours.

            If you are an existing user you will be required to log into the PMRV system with your credentials.

            If you are a new user, you will be sent an email requesting you to validate your email and to complete the user account creation process before your account is activated.

            [Confirm your account now](${operatorInvitationConfirmationLink})'
            WHERE NAME = 'InvitationToOperatorAccount';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                'You have been invited to the PMRV system to become ${userRoleType} for ${installationAccountName}.

                To claim and activate your account you must click the link below within 72 hours.

                If you are an existing user you will be required to log into the PMRV system with your credentials.

                If you are a new user, you will be sent an email requesting you to validate your email and to complete the user account creation process before your account is activated.

                [Confirm your account now](${operatorInvitationConfirmationLink})'
                WHERE NAME = 'InvitationToOperatorAccount';
            </sql>
        </rollback>
    </changeSet>
    <changeSet id="0_1_0_EDIT_INVITATION_TO_REGULATOR_ACCOUNT_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            '${applicantFirstName} ${applicantLastName}

            An account has been created for you.

            To claim and activate your account you must click the link below within ${expirationMinutes/60} hours.

            You will be asked to create a password.

            [Activate your account now](${regulatorInvitationConfirmationLink})'
            WHERE NAME = 'InvitationToRegulatorAccount';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                '${applicantFirstName} ${applicantLastName}

                An account has been created for you.

                To claim and activate your account you must click the link below within 72 hours.

                You will be asked to create a password.

                [Activate your account now](${regulatorInvitationConfirmationLink})'
                WHERE NAME = 'InvitationToRegulatorAccount';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_EDIT_INVITATION_TO_VERIFIER_ACCOUNT_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            '${applicantFirstName} ${applicantLastName},

            An account has been created for you.

            To claim and activate your account you must click the link below within ${expirationMinutes/60} hours.

            You will be asked to create a password.

            [Activate your account now](${verifierInvitationConfirmationLink})'
            WHERE NAME = 'InvitationToVerifierAccount';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                '${applicantFirstName} ${applicantLastName},

                An account has been created for you.

                To claim and activate your account you must click the link below within 72 hours.

                You will be asked to create a password.

                [Activate your account now](${verifierInvitationConfirmationLink})'
                WHERE NAME = 'InvitationToVerifierAccount';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_EDIT_CHANGE_2FA_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            'Use this link to sign in to the PMRV and update your authenticator app:

            [Sign in and set up new two factor authentication](${change2FALink})

            This link will expire in ${expirationMinutes} minutes.

            If you did not request this change you must contact the PMRV at ${officialPmrvContact}.

            This is an automatic email - please do not reply to this address.'
            WHERE NAME = 'Change2FA';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                'Use this link to sign in to the PMRV and update your authenticator app:

                [Sign in and set up new two factor authentication](${change2FALink})

                This link will expire in 5 minutes.

                If you did not request this change you must contact the PMRV at ${officialPmrvContact}.

                This is an automatic email - please do not reply to this address.'
                WHERE NAME = 'Change2FA';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_1_EDIT_INVITATION_TO_OPERATOR_ACCOUNT_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            'You have been invited to the PMRV system to become ${userRoleType} for ${installationAccountName}.

To claim and activate your account you must click the link below within ${expirationMinutes/60} hours.

If you are an existing user you will be required to log into the PMRV system with your credentials.

If you are a new user, you will be sent an email requesting you to validate your email and to complete the user account creation process before your account is activated.

[Confirm your account now](${operatorInvitationConfirmationLink})'
            WHERE NAME = 'InvitationToOperatorAccount';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                'You have been invited to the PMRV system to become ${userRoleType} for ${installationAccountName}.

To claim and activate your account you must click the link below within 72 hours.

If you are an existing user you will be required to log into the PMRV system with your credentials.

If you are a new user, you will be sent an email requesting you to validate your email and to complete the user account creation process before your account is activated.

[Confirm your account now](${operatorInvitationConfirmationLink})'
                WHERE NAME = 'InvitationToOperatorAccount';
            </sql>
        </rollback>
    </changeSet>
    <changeSet id="0_1_1_EDIT_INVITATION_TO_REGULATOR_ACCOUNT_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            '${applicantFirstName} ${applicantLastName}

An account has been created for you.

To claim and activate your account you must click the link below within ${expirationMinutes/60} hours.

You will be asked to create a password.

[Activate your account now](${regulatorInvitationConfirmationLink})'
            WHERE NAME = 'InvitationToRegulatorAccount';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                '${applicantFirstName} ${applicantLastName}

An account has been created for you.

To claim and activate your account you must click the link below within 72 hours.

You will be asked to create a password.

[Activate your account now](${regulatorInvitationConfirmationLink})'
                WHERE NAME = 'InvitationToRegulatorAccount';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_1_EDIT_INVITATION_TO_VERIFIER_ACCOUNT_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            '${applicantFirstName} ${applicantLastName},

An account has been created for you.

To claim and activate your account you must click the link below within ${expirationMinutes/60} hours.

You will be asked to create a password.

[Activate your account now](${verifierInvitationConfirmationLink})'
            WHERE NAME = 'InvitationToVerifierAccount';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                '${applicantFirstName} ${applicantLastName},

An account has been created for you.

To claim and activate your account you must click the link below within 72 hours.

You will be asked to create a password.

[Activate your account now](${verifierInvitationConfirmationLink})'
                WHERE NAME = 'InvitationToVerifierAccount';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_1_EDIT_CHANGE_2FA_TEMPLATE" author="P70453">
        <sql>
            UPDATE notification_template SET TEXT=
            'Use this link to sign in to the PMRV and update your authenticator app:

[Sign in and set up new two factor authentication](${change2FALink})

This link will expire in ${expirationMinutes} minutes.

If you did not request this change you must contact the PMRV at ${officialPmrvContact}.

This is an automatic email - please do not reply to this address.'
            WHERE NAME = 'Change2FA';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template SET TEXT=
                'Use this link to sign in to the PMRV and update your authenticator app:

[Sign in and set up new two factor authentication](${change2FALink})

This link will expire in 5 minutes.

If you did not request this change you must contact the PMRV at ${officialPmrvContact}.

This is an automatic email - please do not reply to this address.'
                WHERE NAME = 'Change2FA';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_NOTIFICATION_TEMPLATE_UPDATE_TABLE_WITH_COLUMNS_FOR_TEMPLATE_MANAGEMENT" author="pafilisa@unisystems.gr">
        <preConditions onFail="WARN">
            <sqlCheck expectedResult="1">SELECT count(*) FROM information_schema.tables where table_name = 'notification_template';</sqlCheck>
        </preConditions>
        <comment>Update notification_template TABLE</comment>
        <addColumn tableName="notification_template">
            <column name="competent_authority" type="varchar(255)" remarks="The competent authority related to the notification">
                <constraints nullable="true" />
            </column>
        </addColumn>
        <addColumn tableName="notification_template">
            <column name="event_trigger" type="varchar(255)" remarks="The description of the event that triggers the notification">
                <constraints nullable="true" />
            </column>
        </addColumn>
        <addColumn tableName="notification_template">
            <column name="operator" type="varchar(255)" remarks="The operator type">
                <constraints nullable="true" />
            </column>
        </addColumn>
        <addColumn tableName="notification_template">
            <column name="workflow" type="varchar(255)" remarks="The workflow that triggers the notification">
                <constraints nullable="true" />
            </column>
        </addColumn>
        <addColumn tableName="notification_template">
            <column name="role_type" type="varchar(255)" remarks="The type of user that manages the notification">
                <constraints nullable="true" />
            </column>
        </addColumn>
        <addColumn tableName="notification_template">
            <column name="is_managed" type="boolean" defaultValueBoolean="false" remarks="The indication that the notification is managed"/>
        </addColumn>
        <addColumn tableName="notification_template">
            <column name="last_updated_date" type="timestamp" remarks="The date that the notification template was modified">
                <constraints nullable="true" />
            </column>
        </addColumn>
        <rollback>
            <sql>
                ALTER TABLE notification_template
                DROP COLUMN IF EXISTS competent_authority,
                DROP COLUMN IF EXISTS event_trigger,
                DROP COLUMN IF EXISTS operator,
                DROP COLUMN IF EXISTS workflow,
                DROP COLUMN IF EXISTS role_type,
                DROP COLUMN IF EXISTS is_managed,
                DROP COLUMN IF EXISTS last_updated_date;
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_DROP_NOTIFICATION_TEMPLATE_UNIQUE_CONSTRAINT" author="pafilisa@unisystems.gr">
        <dropUniqueConstraint tableName="notification_template" constraintName="notification_template_uc"/>
        <rollback>
            <addUniqueConstraint tableName="notification_template" columnNames="name" constraintName="notification_template_uc"/>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_ADD_NOTIFICATION_TEMPLATE_UNIQUE_CONSTRAINT" author="pafilisa@unisystems.gr">
        <addUniqueConstraint tableName="notification_template" columnNames="name, competent_authority" constraintName="notification_template_uc"/>
        <rollback>
            <dropUniqueConstraint tableName="notification_template" constraintName="notification_template_uc"/>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_CREATE_INDEXES_FOR_NOTIFICATION_TEMPLATE_SEARCHABLE_COLUMNS" author="pafilisa@unisystems.gr">
        <sql>
            CREATE INDEX trgm_gin_idx_notification_template_name ON notification_template USING gin (name gin_trgm_ops);
            CREATE INDEX trgm_gin_idx_notification_template_workflow ON notification_template USING gin (workflow gin_trgm_ops);
        </sql>
        <rollback>
            <sql>
                DROP INDEX trgm_gin_idx_notification_template_name;
                DROP INDEX trgm_gin_idx_notification_template_workflow;
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_RENAME_NOTIFICATION_TEMPLATE_COLUMN_OPERATOR_TO_OPERATOR_TYPE" author="pafilisa@unisystems.gr">
        <renameColumn tableName="notification_template" oldColumnName="operator" newColumnName="operator_type"/>
        <rollback>
            <sql>
                ALTER TABLE notification_template RENAME COLUMN operator_type TO operator;
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_DOCUMENT_TEMPLATE_CREATE_SEQUENCE" author="pafilisa@unisystems.gr">
        <createSequence sequenceName="document_template_seq" minValue="0" maxValue="999999999999999999"
                        incrementBy="1" startValue="1" cycle="false"/>
        <rollback>
            <sql>
                DROP SEQUENCE IF EXISTS document_template_seq;
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_DOCUMENT_TEMPLATE_CREATE_TABLE" author="pafilisa@unisystems.gr">
        <createTable tableName="document_template" remarks="Represents a document template">
            <column name="id" type="bigint" remarks="Primary key">
                <constraints primaryKey="true" primaryKeyName="document_template_pk" nullable="false"/>
            </column>
            <column name="name" type="varchar(255)" remarks="The document template name">
                <constraints nullable="false" />
            </column>
            <column name="competent_authority" type="varchar(255)" remarks="The competent authority related to the document template">
                <constraints nullable="false" />
            </column>
            <column name="operator_type" type="varchar(255)" remarks="The operator type"/>
            <column name="workflow" type="varchar(255)" remarks="The workflow related to the document template">
                <constraints nullable="false" />
            </column>
            <column name="last_updated_date" type="timestamp" remarks="The date that the document template was modified">
                <constraints nullable="false" />
            </column>
        </createTable>

        <addUniqueConstraint tableName="document_template" columnNames="name, competent_authority" constraintName="document_template_uc"/>

        <rollback>
            <sql>
                DROP TABLE IF EXISTS document_template;
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_NOTIFICATION_DOCUMENT_TEMPLATE_CREATE_TABLE" author="pafilisa@unisystems.gr">
        <createTable tableName="notification_document_template" remarks="Represents the relationship between notification and document templates">
            <column name="notification_template_id" type="bigint" remarks="The notification template id">
                <constraints nullable="false"/>
            </column>
            <column name="document_template_id" type="bigint" remarks="The document template id">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addPrimaryKey tableName="notification_document_template" columnNames="notification_template_id, document_template_id" constraintName="notification_document_template_pk"/>
        <addForeignKeyConstraint baseTableName="notification_document_template" baseColumnNames="notification_template_id" constraintName="notification_template_fk" referencedTableName="notification_template" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="notification_document_template" baseColumnNames="document_template_id" constraintName="document_template_fk" referencedTableName="document_template" referencedColumnNames="id"/>

        <rollback>
            <sql>
                DROP TABLE IF EXISTS notification_document_template;
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_CREATE_INDEXES_FOR_DOCUMENT_TEMPLATE_SEARCHABLE_COLUMNS" author="pafilisa@unisystems.gr">
        <sql>
            CREATE INDEX trgm_gin_idx_document_template_name ON document_template USING gin (name gin_trgm_ops);
            CREATE INDEX trgm_gin_idx_document_template_workflow ON document_template USING gin (workflow gin_trgm_ops);
        </sql>
        <rollback>
            <sql>
                DROP INDEX trgm_gin_idx_document_template_name;
                DROP INDEX trgm_gin_idx_document_template_workflow;
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_RENAME_NOTIFICATION_DOCUMENT_TEMPLATE_TABLE" author="P70453">
        <renameTable newTableName="notification_template_document_template" oldTableName="notification_document_template" />
        <rollback>
            <renameTable newTableName="notification_document_template" oldTableName="notification_template_document_template" />
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_RENAME_DOCUMENT_TEMPLATE_TABLE" author="P70453">
        <renameTable newTableName="notification_document_template" oldTableName="document_template" />
        <rollback>
            <renameTable newTableName="document_template" oldTableName="notification_document_template" />
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_RENAME_DOCUMENT_TEMPLATE_SEQUENCE" author="P70453">
        <renameSequence newSequenceName="notification_document_template_seq" oldSequenceName="document_template_seq" />
        <rollback>
            <renameSequence newSequenceName="document_template_seq" oldSequenceName="notification_document_template_seq" />
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_reference_file_document_in_document_template_table" author="P35066">
    	<addColumn tableName="notification_document_template">
            <column name="file_document_id" type="bigint" remarks="The id of the related file document">
                <constraints nullable="true" />
            </column>
        </addColumn>
        <addUniqueConstraint tableName="notification_document_template" columnNames="file_document_id" constraintName="file_document_id_uc"/>
		<sql>
			delete from file_document where status = 'PENDING';
			with file_doc as (
				select id, document_template_id
				from file_document
			)
			update notification_document_template
			set file_document_id = file_doc.id
			from file_doc
			where notification_document_template.id = file_doc.document_template_id;
		</sql>
		<addNotNullConstraint tableName="notification_document_template" columnName="file_document_id"/>
		<dropColumn tableName="file_document">
            <column name="document_template_id"/>
        </dropColumn>

        <rollback>
	        <addColumn tableName="file_document">
	            <column name="document_template_id" type="bigint" remarks="The id of the related document template">
	                <constraints nullable="true" />
	            </column>
	        </addColumn>
            <sql>
                with doc_template as (
					select id, file_document_id
					from notification_document_template
				)
				update file_document
				set document_template_id = doc_template.id
				from doc_template
				where file_document.id = doc_template.file_document_id;
            </sql>
            <dropNotNullConstraint tableName="file_document" columnName="document_template_id"/>
            <dropColumn tableName="notification_document_template">
	            <column name="file_document_id"/>
	        </dropColumn>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_delete_demo_notification_and_document_templates" author="P35066">
        <sql>
        	delete from notification_template_document_template
        	where notification_template_id in (
        		select id from notification_template where name in ('Ad-hoc Letter', 'AV AEM Plan Approved(2009)', 'AV AEM Plan Approved(2010)', 'AV Determination Notice')
        	);
            
            delete from notification_template
            where name in ('Ad-hoc Letter', 'AV AEM Plan Approved(2009)', 'AV AEM Plan Approved(2010)', 'AV Determination Notice');
            
            delete from notification_document_template
            where name in ('Ad-hoc Letter', 'AEM Plan Approval 2009', 'AEM Plan Approval 2010');
            
            delete from file_document
            where file_name in ('EA - AEM Plan Approval Notice Letter.docx', 'AEM Plan Approval Notice.docx', 'EA Ad-hoc letter.docx');
            
            delete from databasechangelog
			where id in (
				'0_1_0_INSERT_AD_HOC_LETTER_NOTIFICATION_TEMPLATE_FOR_CA_WALES',
				'0_1_0_INSERT_AD_HOC_LETTER_DOCUMENT_TEMPLATE_FOR_CA_WALES',
				'0_1_0_INSERT_AV_AEM_PLAN_APPROVED_2009_DOCUMENT_TEMPLATE_FOR_CA_WALES',
				'0_1_0_INSERT_AV_AEM_PLAN_APPROVED_2010_DOCUMENT_TEMPLATE_FOR_CA_ENGLAND',
				'0_1_0_INSERT_AD_HOC_LETTER_DOCUMENT_FILE_FOR_CA_WALES',
				'0_1_0_INSERT_AV_AEM_PLAN_APPROVED_2009_NOTIFICATION_TEMPLATE_FOR_CA_WALES',
				'0_1_0_INSERT_AV_AEM_PLAN_APPROVED_2009_DOCUMENT_FILE_FOR_CA_WALES',
				'0_1_0_INSERT_AV_AEM_PLAN_APPROVED_2010_NOTIFICATION_TEMPLATE_FOR_CA_ENGLAND',
				'0_1_0_INSERT_AV_AEM_PLAN_APPROVED_2010_DOCUMENT_FILE_FOR_CA_ENGLAND',
				'0_1_0_INSERT_AV_DETERMINATION_NOTICE_NOTIFICATION_TEMPLATE_FOR_CA_WALES');
        </sql>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_add_document_template_column_type" author="P35066">
        <addColumn tableName="notification_document_template">
            <column name="type" type="varchar(255)" remarks="The type of the document template">
                <constraints nullable="false" />
            </column>
        </addColumn>
        <dropUniqueConstraint tableName="notification_document_template" constraintName="document_template_uc"/>
        <addUniqueConstraint tableName="notification_document_template" columnNames="type, competent_authority" constraintName="document_template_uc"/>
        <rollback>
        	<dropUniqueConstraint tableName="notification_document_template" constraintName="document_template_uc"/>
        	<addUniqueConstraint tableName="notification_document_template" columnNames="name, competent_authority" constraintName="document_template_uc"/>
        	<dropColumn tableName="notification_document_template">
	            <column name="type"/> 
	        </dropColumn>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_change_comment_of_document_template_name_column" author="P35066">
	    <setColumnRemarks
	        tableName="notification_document_template"
	        columnName="name"
	        remarks="The display name of the document template"/>
	    <rollback>
	    	<setColumnRemarks
		        tableName="notification_document_template"
		        columnName="name"
		        remarks="The document template name"/>
	    </rollback>
	</changeSet>
	
	<changeSet id="0_1_0_rename_document_template_file_document_id_column_to_file_document_template_id" author="P35066">
        <renameColumn tableName="notification_document_template" oldColumnName="file_document_id" newColumnName="file_document_template_id"/>
        <rollback>
            <renameColumn tableName="notification_document_template" oldColumnName="file_document_template_id" newColumnName="file_document_id"/>
        </rollback>
    </changeSet>

	<changeSet id="0_1_0_insert_RFI_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L025_P3_Request_for_further_information_notice_20130402.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RFI',
            	'IN Request for Further Information', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'RFI sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L025_P3_Request_for_further_information_notice_20130402.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Further Information',
				'An important letter from the Emissions Trading Portal',
				'ENGLAND',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Information',
	            'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'ENGLAND');
            
            delete from notification_template
            where name = 'IN Request for Further Information' and competent_authority = 'ENGLAND';
            
            delete from notification_document_template
            where name = 'IN Request for Further Information' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where file_name = 'L025_P3_Request_for_further_information_notice_20130402.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L025_P3_Request_for_further_information_notice_Mar14.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RFI',
            	'IN Request for Further Information', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'RFI sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L025_P3_Request_for_further_information_notice_Mar14.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Further Information',
				'An important letter from the Emissions Trading Portal',
				'NORTHERN_IRELAND',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Information',
	            'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_template
            where name = 'IN Request for Further Information' and competent_authority = 'NORTHERN_IRELAND';
            
            delete from notification_document_template
            where name = 'IN Request for Further Information' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where file_name = 'L025_P3_Request_for_further_information_notice_Mar14.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L025 Request for further information notice 260721.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RFI',
            	'IN Request for Further Information', 
            	'OPRED', 
            	'INSTALLATION', 
            	'RFI sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L025 Request for further information notice 260721.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Further Information',
				'An important letter from the Emissions Trading Portal',
				'OPRED',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Information',
	            'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'OPRED');
            
            delete from notification_template
            where name = 'IN Request for Further Information' and competent_authority = 'OPRED';
            
            delete from notification_document_template
            where name = 'IN Request for Further Information' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where file_name = 'L025 Request for further information notice 260721.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="L025 P3 Request for further information notice - for applications.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RFI',
            	'IN Request for Further Information', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'RFI sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L025 P3 Request for further information notice - for applications.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Further Information',
				'An important letter from the Emissions Trading Portal',
				'SCOTLAND',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Information',
	            'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'SCOTLAND');
            
            delete from notification_template
            where name = 'IN Request for Further Information' and competent_authority = 'SCOTLAND';
            
            delete from notification_document_template
            where name = 'IN Request for Further Information' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where file_name = 'L025 P3 Request for further information notice - for applications.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L025_P3_Request_for_further_information_notice.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RFI',
            	'IN Request for Further Information', 
            	'WALES', 
            	'INSTALLATION', 
            	'RFI sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L025_P3_Request_for_further_information_notice.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Further Information',
				'An important letter from the Emissions Trading Portal',
				'WALES',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Information',
	            'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Further Information' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Further Information' and competent_authority = 'WALES');
            
            delete from notification_template
            where name = 'IN Request for Further Information' and competent_authority = 'WALES';
            
            delete from notification_document_template
            where name = 'IN Request for Further Information' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where file_name = 'L025_P3_Request_for_further_information_notice.docx'
        </rollback>
    </changeSet>
    
    
    <changeSet id="0_1_0_insert_RFI_24_hours_expiration_email_template_for_ca_england" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'24 hours expiration email',
				'Expiration email 24 hours',
				'ENGLAND',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '24 hours expiration email' and competent_authority = 'ENGLAND';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_24_hours_expiration_email_template_for_ca_northern_ireland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'24 hours expiration email',
				'Expiration email 24 hours',
				'NORTHERN_IRELAND',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '24 hours expiration email' and competent_authority = 'NORTHERN_IRELAND';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_24_hours_expiration_email_template_for_ca_opred" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'24 hours expiration email',
				'Expiration email 24 hours',
				'OPRED',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '24 hours expiration email' and competent_authority = 'OPRED';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_24_hours_expiration_email_template_for_ca_scotland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'24 hours expiration email',
				'Expiration email 24 hours',
				'SCOTLAND',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '24 hours expiration email' and competent_authority = 'SCOTLAND';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_24_hours_expiration_email_template_for_ca_wales" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'24 hours expiration email',
				'Expiration email 24 hours',
				'WALES',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '24 hours expiration email' and competent_authority = 'WALES';
            </sql>
        </rollback>
    </changeSet>

	<changeSet id="0_1_0_insert_RFI_7_days_expiration_email_template_for_ca_england" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'7 days expiration email',
				'Expiration email 7 days',
				'ENGLAND',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '7 days expiration email' and competent_authority = 'ENGLAND';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_7_days_expiration_email_template_for_ca_northern_ireland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'7 days expiration email',
				'Expiration email 7 days',
				'NORTHERN_IRELAND',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '7 days expiration email' and competent_authority = 'NORTHERN_IRELAND';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_7_days_expiration_email_template_for_ca_opred" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'7 days expiration email',
				'Expiration email 7 days',
				'OPRED',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '7 days expiration email' and competent_authority = 'OPRED';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_7_days_expiration_email_template_for_ca_scotland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'7 days expiration email',
				'Expiration email 7 days',
				'SCOTLAND',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '7 days expiration email' and competent_authority = 'SCOTLAND';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RFI_7_days_expiration_email_template_for_ca_wales" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'7 days expiration email',
				'Expiration email 7 days',
				'WALES',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RFI sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for further information for ${accountName} in the workflow with Workflow ID: ${workflowID} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = '7 days expiration email' and competent_authority = 'WALES';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_UPDATE_ACCOUNT_USERS_SETUP_MESSAGE_NOTIFICATION_TEMPLATE" author="p70453" context="migrate">

        <comment>accountId without format</comment>
        <sql>
            update notification_template set text =
            'You are currently the Admin user on your account.

You can add additional Admin users, other Operator users, Consultants or Verifiers.

Users can be managed at any time from your Dashboard by selecting ''Manage users, contacts or verifiers''

or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId?c}})'
            where name = 'AccountUsersSetup';
        </sql>
        <rollback></rollback>

    </changeSet>

    <changeSet id="0_1_0_UPDATE_INSERT_VERIFIER_NO_LONGER_AVAILABLE_MESSAGE_NOTIFICATION_TEMPLATE" author="p70453" context="migrate">

        <comment>accountId without format</comment>
        <sql>
            update notification_template set text =
            'The verifier you have appointed at your installation has been removed or suspended by the regulator and is no longer available.

You can appoint a new verifier at any time from your dashboard by selecting "Manage users, contacts or verifiers" or by clicking on this link to [Manage users, contacts and verifiers]({"action": "ACCOUNT_USERS_SETUP", "accountId": ${accountId?c}}).

If you do not appoint a verifier now, you will be reminded at the end of each calendar year and prior to the deadline for submission of your Annual Emission Monitoring report that you must appoint a verifier.'
            where name = 'VerifierNoLongerAvailable';
        </sql>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_RFI_expiration_24_hours_notification_template_content_variable_names" author="P35066">
        <sql>
            <![CDATA[
            update notification_template set text =
            'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for further information for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations'
            where name = '24 hours expiration email';]]>;
        </sql>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_RFI_expiration_7_days_notification_template_content_variable_names" author="P35066">
        <sql>
            <![CDATA[
            update notification_template set text =
            'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for further information for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations' 
			where name = '7 days expiration email';]]>;
        </sql>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_rename_RFI_reminder_notification_template_names" author="P35066">
        <sql>
        	update notification_template
        	set name = 'RFI 7 days expiration email'
        	where name = '7 days expiration email'
        	and workflow = 'RFI sub-process';
        	
        	update notification_template
        	set name = 'RFI 24 hours expiration email'
        	where name = '24 hours expiration email'
        	and workflow = 'RFI sub-process';
        </sql>
        <rollback>
        	update notification_template
        	set name = '7 days expiration email'
        	where name = 'RFI 7 days expiration email'
        	and workflow = 'RFI sub-process';
        	
        	update notification_template
        	set name = '24 hours expiration email'
        	where name = 'RFI 24 hours expiration email'
        	and workflow = 'RFI sub-process';
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_RDE_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L026 IN Request for Determination Extension UKETS Final.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RDE',
            	'IN Request for Determination Extension', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'RDE sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L026 IN Request for Determination Extension UKETS Final.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Determination Extension',
				'An important letter from the Emissions Trading Portal',
				'ENGLAND',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Determination Extension',
	            'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'ENGLAND');
            
            delete from notification_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'ENGLAND';
            
            delete from notification_document_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where file_name = 'L026 IN Request for Determination Extension UKETS Final.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L026 P3 Request for time extension notice NI Mar 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RDE',
            	'IN Request for Determination Extension', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'RDE sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L026 P3 Request for time extension notice NI Mar 13.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Determination Extension',
				'An important letter from the Emissions Trading Portal',
				'NORTHERN_IRELAND',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Determination Extension',
	            'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'NORTHERN_IRELAND';
            
            delete from notification_document_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where file_name = 'L026 P3 Request for time extension notice NI Mar 13.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L026 P3 Request for time extension notice.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RDE',
            	'IN Request for Determination Extension', 
            	'OPRED', 
            	'INSTALLATION', 
            	'RDE sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L026 P3 Request for time extension notice.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Determination Extension',
				'An important letter from the Emissions Trading Portal',
				'OPRED',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Determination Extension',
	            'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'OPRED');
            
            delete from notification_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'OPRED';
            
            delete from notification_document_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where file_name = 'L026 P3 Request for time extension notice.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="ETS-P3-L026 - P3 Request for time extension notice - UK ETS.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RDE',
            	'IN Request for Determination Extension', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'RDE sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'ETS-P3-L026 - P3 Request for time extension notice - UK ETS.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Determination Extension',
				'An important letter from the Emissions Trading Portal',
				'SCOTLAND',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Determination Extension',
	            'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'SCOTLAND');
            
            delete from notification_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'SCOTLAND';
            
            delete from notification_document_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where file_name = 'ETS-P3-L026 - P3 Request for time extension notice - UK ETS.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L026_P3_Request_for_time_extension_notice.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'IN_RDE',
            	'IN Request for Determination Extension', 
            	'WALES', 
            	'INSTALLATION', 
            	'RDE sub-process', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L026_P3_Request_for_time_extension_notice.docx'));
    	</sql>
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'IN Request for Determination Extension',
				'An important letter from the Emissions Trading Portal',
				'WALES',
	            '''Confirm and complete'' button in the Check Your Answers Web Forms Wizard Web Form, within the Submit Request for Determination Extension',
	            'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'IN Request for Determination Extension' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'IN Request for Determination Extension' and competent_authority = 'WALES');
            
            delete from notification_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'WALES';
            
            delete from notification_document_template
            where name = 'IN Request for Determination Extension' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where file_name = 'L026_P3_Request_for_time_extension_notice.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_24_hours_expiration_email_template_for_ca_england" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 24 hours expiration email',
				'Expiration email 24 hours',
				'ENGLAND',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 24 hours expiration email' and competent_authority = 'ENGLAND' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_24_hours_expiration_email_template_for_ca_northern_ireland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 24 hours expiration email',
				'Expiration email 24 hours',
				'NORTHERN_IRELAND',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 24 hours expiration email' and competent_authority = 'NORTHERN_IRELAND' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_RDE_24_hours_expiration_email_template_for_ca_opred" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 24 hours expiration email',
				'Expiration email 24 hours',
				'OPRED',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 24 hours expiration email' and competent_authority = 'OPRED' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>    

	<changeSet id="0_1_0_insert_RDE_24_hours_expiration_email_template_for_ca_scotland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 24 hours expiration email',
				'Expiration email 24 hours',
				'SCOTLAND',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 24 hours expiration email' and competent_authority = 'SCOTLAND' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>

	<changeSet id="0_1_0_insert_RDE_24_hours_expiration_email_template_for_ca_wales" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 24 hours expiration email',
				'Expiration email 24 hours',
				'WALES',
				'24 hours before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 24 hours the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 24 hours expiration email' and competent_authority = 'WALES' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>

	<changeSet id="0_1_0_insert_RDE_7_days_expiration_email_template_for_ca_england" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 7 days expiration email',
				'Expiration email 7 days',
				'ENGLAND',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 7 days expiration email' and competent_authority = 'ENGLAND' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_7_days_expiration_email_template_for_ca_northern_ireland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 7 days expiration email',
				'Expiration email 7 days',
				'NORTHERN_IRELAND',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 7 days expiration email' and competent_authority = 'NORTHERN_IRELAND' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_7_days_expiration_email_template_for_ca_opred" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 7 days expiration email',
				'Expiration email 7 days',
				'OPRED',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 7 days expiration email' and competent_authority = 'OPRED' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_7_days_expiration_email_template_for_ca_scotland" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 7 days expiration email',
				'Expiration email 7 days',
				'SCOTLAND',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 7 days expiration email' and competent_authority = 'SCOTLAND' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_RDE_7_days_expiration_email_template_for_ca_wales" author="P35066">
        <sql>
            <![CDATA[
            insert into notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text)
			values (
				nextval('notification_template_seq'),
				'RDE 7 days expiration email',
				'Expiration email 7 days',
				'WALES',
				'168 hours (7 days) before the expiration of the deadline of the pending task.',
				'INSTALLATION',
	            'RDE sub-process',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
				'Dear ${accountPrimaryContact}

Please note that in 7 days the task in the request for determination extension for ${installationAccountName} in the workflow with Workflow ID: ${workflowId} ${workflowType} is going to expire.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')]]>;
        </sql>

        <rollback>
            <sql>
                delete from notification_template where name = 'RDE 7 days expiration email' and competent_authority = 'WALES' and workflow = 'RDE sub-process';
            </sql>
        </rollback>
    </changeSet>
    
    
    <changeSet id="0_1_0_delete_rfi_rde_notification_templates" author="P35066">
        <sql>
        	delete from notification_template_document_template
            where notification_template_id in (select id from notification_template where name in ('IN Request for Further Information', 'IN Request for Determination Extension'));
            
            delete from notification_template
            where name in ('IN Request for Further Information', 'IN Request for Determination Extension'); 
        </sql>
        <rollback>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_official_notice_notification_template_for_ca_england" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic email Template for Installation letter',
				'An important letter from the Emissions Trading Portal',
				'ENGLAND',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
        	select nt.id, ndt.id
        	from notification_template nt
        	cross join notification_document_template ndt
        	where nt.name = 'Generic email Template for Installation letter'
        	and nt.competent_authority = 'ENGLAND'
        	and ndt.competent_authority = 'ENGLAND'
        	and ndt.name in ('IN Request for Further Information', 'IN Request for Determination Extension');
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id in (
            	select id from notification_document_template where name in ('IN Request for Further Information', 'IN Request for Determination Extension')
            	 and competent_authority = 'ENGLAND');
            
            delete from notification_template
            where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_official_notice_notification_template_for_ca_northern_ireland" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic email Template for Installation letter',
				'An important letter from the Emissions Trading Portal',
				'NORTHERN_IRELAND',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
        	select nt.id, ndt.id
        	from notification_template nt
        	cross join notification_document_template ndt
        	where nt.name = 'Generic email Template for Installation letter'
        	and nt.competent_authority = 'NORTHERN_IRELAND'
        	and ndt.competent_authority = 'NORTHERN_IRELAND'
        	and ndt.name in ('IN Request for Further Information', 'IN Request for Determination Extension');
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id in (
            	select id from notification_document_template where name in ('IN Request for Further Information', 'IN Request for Determination Extension')
            	 and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_template
            where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_official_notice_notification_template_for_ca_opred" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic email Template for Installation letter',
				'An important letter from the Emissions Trading Portal',
				'OPRED',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
        	select nt.id, ndt.id
        	from notification_template nt
        	cross join notification_document_template ndt
        	where nt.name = 'Generic email Template for Installation letter'
        	and nt.competent_authority = 'OPRED'
        	and ndt.competent_authority = 'OPRED'
        	and ndt.name in ('IN Request for Further Information', 'IN Request for Determination Extension');
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id in (
            	select id from notification_document_template where name in ('IN Request for Further Information', 'IN Request for Determination Extension')
            	 and competent_authority = 'OPRED');
            
            delete from notification_template
            where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_official_notice_notification_template_for_ca_scotland" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic email Template for Installation letter',
				'An important letter from the Emissions Trading Portal',
				'SCOTLAND',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
        	select nt.id, ndt.id
        	from notification_template nt
        	cross join notification_document_template ndt
        	where nt.name = 'Generic email Template for Installation letter'
        	and nt.competent_authority = 'SCOTLAND'
        	and ndt.competent_authority = 'SCOTLAND'
        	and ndt.name in ('IN Request for Further Information', 'IN Request for Determination Extension');
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id in (
            	select id from notification_document_template where name in ('IN Request for Further Information', 'IN Request for Determination Extension')
            	 and competent_authority = 'SCOTLAND');
            
            delete from notification_template
            where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_official_notice_notification_template_for_ca_wales" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic email Template for Installation letter',
				'An important letter from the Emissions Trading Portal',
				'WALES',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${accountPrimaryContact}

Please find attached a letter from the Emissions Trading Operations team in relation to your installation.

If you have any queries in relation to this letter, please contact the relevant Technical Officer.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
        	select nt.id, ndt.id
        	from notification_template nt
        	cross join notification_document_template ndt
        	where nt.name = 'Generic email Template for Installation letter'
        	and nt.competent_authority = 'WALES'
        	and ndt.competent_authority = 'WALES'
        	and ndt.name in ('IN Request for Further Information', 'IN Request for Determination Extension');
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id in (
            	select id from notification_document_template where name in ('IN Request for Further Information', 'IN Request for Determination Extension')
            	 and competent_authority = 'WALES');
            
            delete from notification_template
            where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES';
        </rollback>
    </changeSet>
    
    
    
    <changeSet id="0_1_0_delete_rfi_rde_expiration_notification_templates" author="P35066">
        <sql>
            delete from notification_template
            where name in ('RFI 24 hours expiration email', 'RFI 7 days expiration email', 'RDE 24 hours expiration email', 'RDE 7 days expiration email'); 
        </sql>
        <rollback>
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_expiration_reminder_notification_template_for_ca_england" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic Expiration Reminder Template',
				'${workflow} ${workflowTask} (${expirationTime} remaining)',
				'ENGLAND',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${workflowUser}

Operator name: ${legalEntityName}

Installation name: ${installationAccountName}

Permit reference: ${(permitId)!}

The deadline for the ${workflowTask} of the ${workflow} application (reference ${workflowId}) for the above installation is due ${expirationTimeLong}. The task must be completed ${deadline?date?string(''dd MMMM yyyy'')}.

Please contact your team leader urgently if you''re experiencing any difficulty in completing the assessment.

Kind regards,

${competentAuthorityEmail}')
            ]]>;
        </sql>
        
        <rollback>
            delete from notification_template
            where name = 'Generic Expiration Reminder Template' and competent_authority = 'ENGLAND';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_expiration_reminder_notification_template_for_ca_northern_ireland" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic Expiration Reminder Template',
				'${workflow} ${workflowTask} (${expirationTime} remaining)',
				'NORTHERN_IRELAND',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${workflowUser}

Operator name: ${legalEntityName}

Installation name: ${installationAccountName}

Permit reference: ${(permitId)!}

The deadline for the ${workflowTask} of the ${workflow} application (reference ${workflowId}) for the above installation is due ${expirationTimeLong}. The task must be completed ${deadline?date?string(''dd MMMM yyyy'')}.

Please contact your team leader urgently if you''re experiencing any difficulty in completing the assessment.

Kind regards,

${competentAuthorityEmail}')
            ]]>;
        </sql>
        
        <rollback>
            delete from notification_template
            where name = 'Generic Expiration Reminder Template' and competent_authority = 'NORTHERN_IRELAND';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_expiration_reminder_notification_template_for_ca_opred" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic Expiration Reminder Template',
				'${workflow} ${workflowTask} (${expirationTime} remaining)',
				'OPRED',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${workflowUser}

Operator name: ${legalEntityName}

Installation name: ${installationAccountName}

Permit reference: ${(permitId)!}

The deadline for the ${workflowTask} of the ${workflow} application (reference ${workflowId}) for the above installation is due ${expirationTimeLong}. The task must be completed ${deadline?date?string(''dd MMMM yyyy'')}.

Please contact your team leader urgently if you''re experiencing any difficulty in completing the assessment.

Kind regards,

${competentAuthorityEmail}')
            ]]>;
        </sql>
        
        <rollback>
            delete from notification_template
            where name = 'Generic Expiration Reminder Template' and competent_authority = 'OPRED';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_expiration_reminder_notification_template_for_ca_scotland" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic Expiration Reminder Template',
				'${workflow} ${workflowTask} (${expirationTime} remaining)',
				'SCOTLAND',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${workflowUser}

Operator name: ${legalEntityName}

Installation name: ${installationAccountName}

Permit reference: ${(permitId)!}

The deadline for the ${workflowTask} of the ${workflow} application (reference ${workflowId}) for the above installation is due ${expirationTimeLong}. The task must be completed ${deadline?date?string(''dd MMMM yyyy'')}.

Please contact your team leader urgently if you''re experiencing any difficulty in completing the assessment.

Kind regards,

${competentAuthorityEmail}')
            ]]>;
        </sql>
        
        <rollback>
            delete from notification_template
            where name = 'Generic Expiration Reminder Template' and competent_authority = 'SCOTLAND';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_generic_expiration_reminder_notification_template_for_ca_wales" author="P35066">
    	<sql>
            <![CDATA[
            INSERT INTO notification_template (
	            id,
	            name,
	            subject,
	            competent_authority,
	            event_trigger,
	            operator_type,
	            workflow,
	            role_type,
	            is_managed,
	            last_updated_date,
	            text
	            )
			VALUES (
				nextval('notification_template_seq'),
				'Generic Expiration Reminder Template',
				'${workflow} ${workflowTask} (${expirationTime} remaining)',
				'WALES',
	            '[TBC]',
	            'INSTALLATION',
	            '[TBC]',
	            'OPERATOR',
	            true,
	            '2022-03-27 00:00:00',
	            'Dear ${workflowUser}

Operator name: ${legalEntityName}

Installation name: ${installationAccountName}

Permit reference: ${(permitId)!}

The deadline for the ${workflowTask} of the ${workflow} application (reference ${workflowId}) for the above installation is due ${expirationTimeLong}. The task must be completed ${deadline?date?string(''dd MMMM yyyy'')}.

Please contact your team leader urgently if you''re experiencing any difficulty in completing the assessment.

Kind regards,

${competentAuthorityEmail}')
            ]]>;
        </sql>
        
        <rollback>
            delete from notification_template
            where name = 'Generic Expiration Reminder Template' and competent_authority = 'WALES';
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_notice_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L028 IN Surrendered UKETS Final v1.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDERED_NOTICE',
            	'Permit surrender notice', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L028 IN Surrendered UKETS Final v1.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'ENGLAND');
            
            delete from notification_document_template
            where name = 'Permit surrender notice' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L028 IN Surrendered UKETS Final v1.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_notice_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L028 Surrendered NI Mar 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDERED_NOTICE',
            	'Permit surrender notice', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L028 Surrendered NI Mar 13.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_document_template
            where name = 'Permit surrender notice' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L028 Surrendered NI Mar 13.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_notice_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L028 Surrendered 08122021.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDERED_NOTICE',
            	'Permit surrender notice', 
            	'OPRED', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L028 Surrendered 08122021.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'OPRED');
            
            delete from notification_document_template
            where name = 'Permit surrender notice' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L028 Surrendered 08122021.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_notice_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="UKETS L028 - Surrendered (2).docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDERED_NOTICE',
            	'Permit surrender notice', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'UKETS L028 - Surrendered (2).docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'SCOTLAND');
            
            delete from notification_document_template
            where name = 'Permit surrender notice' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'UKETS L028 - Surrendered (2).docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_notice_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L028 IN Surrendered UKETS NRW July 21.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDERED_NOTICE',
            	'Permit surrender notice', 
            	'WALES', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L028 IN Surrendered UKETS NRW July 21.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Permit surrender notice' and competent_authority = 'WALES');
            
            delete from notification_document_template
            where name = 'Permit surrender notice' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L028 IN Surrendered UKETS NRW July 21.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_rejected_notice_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L031 Surrender Refused UKETS Final v1.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_REJECTED_NOTICE',
            	'Permit Surrender Refused Notice', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L031 Surrender Refused UKETS Final v1.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'ENGLAND');
            
            delete from notification_document_template
            where name = 'Permit Surrender Refused Notice' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L031 Surrender Refused UKETS Final v1.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_rejected_notice_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L031 Surrender Refused NI Mar 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_REJECTED_NOTICE',
            	'Permit Surrender Refused Notice', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L031 Surrender Refused NI Mar 13.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_document_template
            where name = 'Permit Surrender Refused Notice' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L031 Surrender Refused NI Mar 13.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_rejected_notice_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L031 Surrender Refused.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_REJECTED_NOTICE',
            	'Permit Surrender Refused Notice', 
            	'OPRED', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L031 Surrender Refused.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'OPRED');
            
            delete from notification_document_template
            where name = 'Permit Surrender Refused Notice' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L031 Surrender Refused.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_rejected_notice_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="This template has not yet been approved.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_REJECTED_NOTICE',
            	'Permit Surrender Refused Notice', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'This template has not yet been approved.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'SCOTLAND');
            
            delete from notification_document_template
            where name = 'Permit Surrender Refused Notice' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'This template has not yet been approved.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_rejected_notice_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L031 Surrender Refused.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_REJECTED_NOTICE',
            	'Permit Surrender Refused Notice', 
            	'WALES', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L031 Surrender Refused.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Refused Notice' and competent_authority = 'WALES');
            
            delete from notification_document_template
            where name = 'Permit Surrender Refused Notice' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L031 Surrender Refused.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_deemed_withdrawn_notice_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn - Final 05032013.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE',
            	'Permit Surrender Deemed Withdrawn Notice', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L132 Surrender Deemed Withdrawn - Final 05032013.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'ENGLAND');
            
            delete from notification_document_template
            where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L132 Surrender Deemed Withdrawn - Final 05032013.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_deemed_withdrawn_notice_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn NI Mar 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE',
            	'Permit Surrender Deemed Withdrawn Notice', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L132 Surrender Deemed Withdrawn NI Mar 13.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_document_template
            where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L132 Surrender Deemed Withdrawn NI Mar 13.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_deemed_withdrawn_notice_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE',
            	'Permit Surrender Deemed Withdrawn Notice', 
            	'OPRED', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L132 Surrender Deemed Withdrawn.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'OPRED');
            
            delete from notification_document_template
            where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L132 Surrender Deemed Withdrawn.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_deemed_withdrawn_notice_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="This template has not yet been approved.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE',
            	'Permit Surrender Deemed Withdrawn Notice', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'This template has not yet been approved.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'SCOTLAND');
            
            delete from notification_document_template
            where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'This template has not yet been approved.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_deemed_withdrawn_notice_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE',
            	'Permit Surrender Deemed Withdrawn Notice', 
            	'WALES', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L132 Surrender Deemed Withdrawn.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'WALES');
            
            delete from notification_document_template
            where name = 'Permit Surrender Deemed Withdrawn Notice' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L132 Surrender Deemed Withdrawn.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_cessation_complete_notice_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L022 Cessation Following Surrender 23062014.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_CESSATION',
            	'Cessation Notice after Permit Surrender', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 Cessation Following Surrender 23062014.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'ENGLAND');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 Cessation Following Surrender 23062014.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_cessation_complete_notice_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L022 Cessation Following Surrender NI Mar 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_CESSATION',
            	'Cessation Notice after Permit Surrender', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 Cessation Following Surrender NI Mar 13.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 Cessation Following Surrender NI Mar 13.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_cessation_complete_notice_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L022 Cessation Following Surrender OPRED.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_CESSATION',
            	'Cessation Notice after Permit Surrender', 
            	'OPRED', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 Cessation Following Surrender OPRED.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'OPRED');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 Cessation Following Surrender OPRED.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_cessation_complete_notice_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="ETS-P3-L022 - Cessation following surrender.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_CESSATION',
            	'Cessation Notice after Permit Surrender', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'ETS-P3-L022 - Cessation following surrender.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'SCOTLAND');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'ETS-P3-L022 - Cessation following surrender.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_surrender_cessation_complete_notice_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L022_Cessation_Following_Surrender test 1.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_SURRENDER_CESSATION',
            	'Cessation Notice after Permit Surrender', 
            	'WALES', 
            	'INSTALLATION', 
            	'Permit surrender', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022_Cessation_Following_Surrender test 1.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'WALES');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Surrender' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022_Cessation_Following_Surrender test 1.docx' order by id desc limit 1);
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_permit_notification_follow_up_accepted_for_ca_england" author="P70605">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
                id,
                name,
                subject,
                competent_authority,
                event_trigger,
                operator_type,
                workflow,
                role_type,
                is_managed,
                last_updated_date,
                text
            )
            VALUES (
                       nextval('notification_template_seq'),
                       'Permit Notification Operator Response',
                       'Permit Notification Operator Response',
                       'ENGLAND',
                       'Notification Operator Response',
                       'INSTALLATION',
                       'Permit Notification',
                       'OPERATOR',
                       true,
                       '2022-03-27 00:00:00',
                       'Dear ${accountPrimaryContact}
       
The Follow up response of the Notification with Workflow ID: ${workflowId} has been accepted.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>

        <rollback>
            delete from notification_template
            where name = 'Permit Notification Operator Response' and competent_authority = 'ENGLAND';
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_permit_notification_follow_up_accepted_for_ca_wales" author="P70605">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
                id,
                name,
                subject,
                competent_authority,
                event_trigger,
                operator_type,
                workflow,
                role_type,
                is_managed,
                last_updated_date,
                text
            )
            VALUES (
                       nextval('notification_template_seq'),
                       'Permit Notification Operator Response',
                       'Permit Notification Operator Response',
                       'WALES',
                       'Notification Operator Response',
                       'INSTALLATION',
                       'Permit Notification',
                       'OPERATOR',
                       true,
                       '2022-03-27 00:00:00',
                       'Dear ${accountPrimaryContact}
       
The Follow up response of the Notification with Workflow ID: ${workflowId} has been accepted.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>

        <rollback>
            delete from notification_template
            where name = 'Permit Notification Operator Response' and competent_authority = 'WALES';
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_permit_notification_follow_up_accepted_for_ca_northern_ireland" author="P70605">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
                id,
                name,
                subject,
                competent_authority,
                event_trigger,
                operator_type,
                workflow,
                role_type,
                is_managed,
                last_updated_date,
                text
            )
            VALUES (
                       nextval('notification_template_seq'),
                       'Permit Notification Operator Response',
                       'Permit Notification Operator Response',
                       'NORTHERN_IRELAND',
                       'Notification Operator Response',
                       'INSTALLATION',
                       'Permit Notification',
                       'OPERATOR',
                       true,
                       '2022-03-27 00:00:00',
                       'Dear ${accountPrimaryContact}
       
The Follow up response of the Notification with Workflow ID: ${workflowId} has been accepted.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>

        <rollback>
            delete from notification_template
            where name = 'Permit Notification Operator Response' and competent_authority = 'NORTHERN_IRELAND';
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_permit_notification_follow_up_accepted_for_ca_scotland" author="P70605">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
                id,
                name,
                subject,
                competent_authority,
                event_trigger,
                operator_type,
                workflow,
                role_type,
                is_managed,
                last_updated_date,
                text
            )
            VALUES (
                       nextval('notification_template_seq'),
                       'Permit Notification Operator Response',
                       'Permit Notification Operator Response',
                       'SCOTLAND',
                       'Notification Operator Response',
                       'INSTALLATION',
                       'Permit Notification',
                       'OPERATOR',
                       true,
                       '2022-03-27 00:00:00',
                       'Dear ${accountPrimaryContact}
       
The Follow up response of the Notification with Workflow ID: ${workflowId} has been accepted.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>

        <rollback>
            delete from notification_template
            where name = 'Permit Notification Operator Response' and competent_authority = 'SCOTLAND';
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_permit_notification_follow_up_accepted_for_ca_opred" author="P70605">
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
                id,
                name,
                subject,
                competent_authority,
                event_trigger,
                operator_type,
                workflow,
                role_type,
                is_managed,
                last_updated_date,
                text
            )
            VALUES (
                       nextval('notification_template_seq'),
                       'Permit Notification Operator Response',
                       'Permit Notification Operator Response',
                       'OPRED',
                       'Notification Operator Response',
                       'INSTALLATION',
                       'Permit Notification',
                       'OPERATOR',
                       true,
                       '2022-03-27 00:00:00',
                       'Dear ${accountPrimaryContact}
       
The Follow up response of the Notification with Workflow ID: ${workflowId} has been accepted.

Kind regards,

Emissions Trading Operations')
            ]]>;
        </sql>

        <rollback>
            delete from notification_template
            where name = 'Permit Notification Operator Response' and competent_authority = 'OPRED';
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_accepted_template_for_england" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L010 IN Notification Accepted_20210204.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_ACCEPTED',
                       'Permit Notification Acknowledgement Letter',
                       'ENGLAND',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L010 IN Notification Accepted_20210204.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
                       (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'ENGLAND')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'ENGLAND');

            delete from notification_document_template
            where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'ENGLAND';

            delete from file_document_template
            where file_name = 'L010 IN Notification Accepted_20210204.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_accepted_template_for_opred" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L010 IN Notification Accepted 260721.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_ACCEPTED',
                       'Permit Notification Acknowledgement Letter',
                       'OPRED',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L010 IN Notification Accepted 260721.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
                       (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'OPRED')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'OPRED');

            delete from notification_document_template
            where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'OPRED';

            delete from file_document_template
            where file_name = 'L010 IN Notification Accepted 260721.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_accepted_template_for_ireland" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L010_IN_Notification_Accepted_NI_UK Nov 2021.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_ACCEPTED',
                       'Permit Notification Acknowledgement Letter',
                       'NORTHERN_IRELAND',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L010_IN_Notification_Accepted_NI_UK Nov 2021.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
                       (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'NORTHERN_IRELAND')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'NORTHERN_IRELAND');

            delete from notification_document_template
            where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'NORTHERN_IRELAND';

            delete from file_document_template
            where file_name = 'L010_IN_Notification_Accepted_NI_UK Nov 2021.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_accepted_template_for_wales" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L010 IN Notification Accepted_20210204_NRW_HT.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_ACCEPTED',
                       'Permit Notification Acknowledgement Letter',
                       'WALES',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L010 IN Notification Accepted_20210204_NRW_HT.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
                       (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'WALES')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'WALES');

            delete from notification_document_template
            where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'WALES';

            delete from file_document_template
            where file_name = 'L010 IN Notification Accepted_20210204_NRW_HT.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_accepted_template_for_scotland" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="L010 IN Notification Accepted - UK ETS update doc FINAL.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_ACCEPTED',
                       'Permit Notification Acknowledgement Letter',
                       'SCOTLAND',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L010 IN Notification Accepted - UK ETS update doc FINAL.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
                       (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'SCOTLAND')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'SCOTLAND');

            delete from notification_document_template
            where name = 'Permit Notification Acknowledgement Letter' and competent_authority = 'SCOTLAND';

            delete from file_document_template
            where file_name = 'L010 IN Notification Accepted - UK ETS update doc FINAL.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_refused_template_for_england" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L011 IN Notification Refused_20210402.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_REFUSED',
                       'Permit Notification Refusal Letter',
                       'ENGLAND',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L011 IN Notification Refused_20210402.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
                       (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'ENGLAND')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'ENGLAND');

            delete from notification_document_template
            where name = 'Permit Notification Refusal Letter' and competent_authority = 'ENGLAND';

            delete from file_document_template
            where file_name = 'L011 IN Notification Refused_20210402.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_refused_template_for_opred" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L011 IN Notification Refused 260721.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_REFUSED',
                       'Permit Notification Refusal Letter',
                       'OPRED',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L011 IN Notification Refused 260721.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
                       (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'OPRED')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'OPRED');

            delete from notification_document_template
            where name = 'Permit Notification Refusal Letter' and competent_authority = 'OPRED';

            delete from file_document_template
            where file_name = 'L011 IN Notification Refused 260721.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_refused_template_for_ireland" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L011 IN Notification Refused NI UK ETS feb 2021.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_REFUSED',
                       'Permit Notification Refusal Letter',
                       'NORTHERN_IRELAND',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L011 IN Notification Refused NI UK ETS feb 2021.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
                       (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'NORTHERN_IRELAND')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'NORTHERN_IRELAND');

            delete from notification_document_template
            where name = 'Permit Notification Refusal Letter' and competent_authority = 'NORTHERN_IRELAND';

            delete from file_document_template
            where file_name = 'L011 IN Notification Refused NI UK ETS feb 2021.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_refused_template_for_wales" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L011 IN Notification Refused_20210402_NRW_HT.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_REFUSED',
                       'Permit Notification Refusal Letter',
                       'WALES',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L011 IN Notification Refused_20210402_NRW_HT.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
                       (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'WALES')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'WALES');

            delete from notification_document_template
            where name = 'Permit Notification Refusal Letter' and competent_authority = 'WALES';

            delete from file_document_template
            where file_name = 'L011 IN Notification Refused_20210402_NRW_HT.docx'
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_insert_notification_refused_template_for_scotland" author="P70605">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="L011 IN Notification Refused.docx" />
        </customChange>
        <sql>
            insert into notification_document_template (
                id,
                type,
                name,
                competent_authority,
                operator_type,
                workflow,
                last_updated_date,
                file_document_template_id)
            values (
                       nextval('notification_document_template_seq'),
                       'PERMIT_NOTIFICATION_REFUSED',
                       'Permit Notification Refusal Letter',
                       'SCOTLAND',
                       'INSTALLATION',
                       'Permit notification',
                       '2022-03-27 00:00:00',
                       (select id from file_document_template where file_name = 'L011 IN Notification Refused.docx'));
        </sql>
        <sql>
            insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
                       (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
                       (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'SCOTLAND')
                   );
        </sql>

        <rollback>
            delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Notification Refusal Letter' and competent_authority = 'SCOTLAND');

            delete from notification_document_template
            where name = 'Permit Notification Refusal Letter' and competent_authority = 'SCOTLAND';

            delete from file_document_template
            where file_name = 'L011 IN Notification Refused.docx'
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_notice_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L020_Revocation template IW 20201127 USE or Article 27a CLEAN.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION',
            	'Permit Revocation Notice', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L020_Revocation template IW 20201127 USE or Article 27a CLEAN.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'ENGLAND');
            
            delete from notification_document_template
            where name = 'Permit Revocation Notice' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L020_Revocation template IW 20201127 USE or Article 27a CLEAN.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_notice_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L020 Revocation NI Mar 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION',
            	'Permit Revocation Notice', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L020 Revocation NI Mar 13.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_document_template
            where name = 'Permit Revocation Notice' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L020 Revocation NI Mar 13.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_notice_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L020 Revocation.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION',
            	'Permit Revocation Notice', 
            	'OPRED', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L020 Revocation.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'OPRED');
            
            delete from notification_document_template
            where name = 'Permit Revocation Notice' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L020 Revocation.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_notice_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="ETS-03-L020 - Revocation P3 - USE.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION',
            	'Permit Revocation Notice', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'ETS-03-L020 - Revocation P3 - USE.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'SCOTLAND');
            
            delete from notification_document_template
            where name = 'Permit Revocation Notice' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'ETS-03-L020 - Revocation P3 - USE.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_notice_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L020 Revocation updated 22 12 20.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION',
            	'Permit Revocation Notice', 
            	'WALES', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L020 Revocation updated 22 12 20.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Notice' and competent_authority = 'WALES');
            
            delete from notification_document_template
            where name = 'Permit Revocation Notice' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L020 Revocation updated 22 12 20.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    
    
    <changeSet id="0_1_0_insert_permit_revocation_withdrawn_notice_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L021 IN Revocation Withdrawn.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_WITHDRAWN',
            	'Permit Revocation Withdrawn Notice', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L021 IN Revocation Withdrawn.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'ENGLAND');
            
            delete from notification_document_template
            where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L021 IN Revocation Withdrawn.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_withdrawn_notice_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L021 Revocation Withdrawn NI Mar 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_WITHDRAWN',
            	'Permit Revocation Withdrawn Notice', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L021 Revocation Withdrawn NI Mar 13.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_document_template
            where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L021 Revocation Withdrawn NI Mar 13.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_withdrawn_notice_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L021 Revocation Withdrawn.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_WITHDRAWN',
            	'Permit Revocation Withdrawn Notice', 
            	'OPRED', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L021 Revocation Withdrawn.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'OPRED');
            
            delete from notification_document_template
            where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L021 Revocation Withdrawn.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_withdrawn_notice_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="This template has not yet been approved.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_WITHDRAWN',
            	'Permit Revocation Withdrawn Notice', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'This template has not yet been approved.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'SCOTLAND');
            
            delete from notification_document_template
            where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'This template has not yet been approved.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_withdrawn_notice_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L021 Revocation Withdrawn.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_WITHDRAWN',
            	'Permit Revocation Withdrawn Notice', 
            	'WALES', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L021 Revocation Withdrawn.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'WALES');
            
            delete from notification_document_template
            where name = 'Permit Revocation Withdrawn Notice' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L021 Revocation Withdrawn.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    
    
    <changeSet id="0_1_0_insert_permit_revocation_cessation_notice_email_template_for_ca_england" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="fileDocumentName" value="L022 Cessation letter 20130724.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_CESSATION',
            	'Cessation Notice after Permit Revocation', 
            	'ENGLAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 Cessation letter 20130724.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'ENGLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'ENGLAND')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'ENGLAND');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'ENGLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 Cessation letter 20130724.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_cessation_notice_email_template_for_ca_northern_ireland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="fileDocumentName" value="L022 Cessation NI MAr 13.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_CESSATION',
            	'Cessation Notice after Permit Revocation', 
            	'NORTHERN_IRELAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 Cessation NI MAr 13.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'NORTHERN_IRELAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'NORTHERN_IRELAND')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'NORTHERN_IRELAND');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'NORTHERN_IRELAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 Cessation NI MAr 13.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_cessation_notice_email_template_for_ca_opred" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="fileDocumentName" value="L022 P3 Cessation.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_CESSATION',
            	'Cessation Notice after Permit Revocation', 
            	'OPRED', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 P3 Cessation.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'OPRED')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'OPRED')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'OPRED');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'OPRED';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 P3 Cessation.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_cessation_notice_email_template_for_ca_scotland" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="fileDocumentName" value="L022 Cessation.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_CESSATION',
            	'Cessation Notice after Permit Revocation', 
            	'SCOTLAND', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 Cessation.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'SCOTLAND')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'SCOTLAND')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'SCOTLAND');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'SCOTLAND';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 Cessation.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_insert_permit_revocation_cessation_notice_email_template_for_ca_wales" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.InsertDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="fileDocumentName" value="L022 Cessation.docx" />
        </customChange>
        <sql>
    		insert into notification_document_template (
    			id,
    			type,
    			name, 
    			competent_authority, 
    			operator_type, 
    			workflow, 
    			last_updated_date, 
    			file_document_template_id)
            values (
            	nextval('notification_document_template_seq'),
            	'PERMIT_REVOCATION_CESSATION',
            	'Cessation Notice after Permit Revocation', 
            	'WALES', 
            	'INSTALLATION', 
            	'Permit Revocation', 
            	'2022-03-27 00:00:00', 
            	(select id from file_document_template where file_name = 'L022 Cessation.docx' order by id desc limit 1));
    	</sql>
        <sql>
        	insert into notification_template_document_template (notification_template_id, document_template_id)
            values (
            (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES'),
            (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'WALES')
            );
        </sql>
        
        <rollback>
        	delete from notification_template_document_template
            where notification_template_id = (select id from notification_template where name = 'Generic email Template for Installation letter' and competent_authority = 'WALES')
            and document_template_id = (select id from notification_document_template where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'WALES');
            
            delete from notification_document_template
            where name = 'Cessation Notice after Permit Revocation' and competent_authority = 'WALES';
        	
            delete from file_document_template
            where ctid IN (select ctid FROM file_document_template where file_name = 'L022 Cessation.docx' order by id desc limit 1);
        </rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_notice_email_template_for_ca_england_rename_etswap_to_pmrv" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_REVOCATION" />
            <param name="fileDocumentName" value="L020_Revocation template IW 20201127 USE or Article 27a CLEAN.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_notice_email_template_for_ca_scotland_rename_etswap_to_pmrv" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_REVOCATION" />
            <param name="fileDocumentName" value="ETS-03-L020 - Revocation P3 - USE.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_notice_email_template_for_ca_wales_rename_etswap_to_pmrv" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_REVOCATION" />
            <param name="fileDocumentName" value="L020 Revocation updated 22 12 20.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    
    <changeSet id="0_1_0_update_permit_surrendered_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_SURRENDERED_NOTICE" />
            <param name="fileDocumentName" value="L028 IN Surrendered UKETS Final v1.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_surrender_refused_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_SURRENDER_REJECTED_NOTICE" />
            <param name="fileDocumentName" value="L031 Surrender Refused UKETS Final v1.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_surrender_cessation_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_SURRENDER_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation Following Surrender 23062014.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrendered_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_SURRENDERED_NOTICE" />
            <param name="fileDocumentName" value="L028 Surrendered NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_surrender_refused_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_SURRENDER_REJECTED_NOTICE" />
            <param name="fileDocumentName" value="L031 Surrender Refused NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_surrender_cessation_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_SURRENDER_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation Following Surrender NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrendered_email_template_for_ca_scotland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_SURRENDERED_NOTICE" />
            <param name="fileDocumentName" value="UKETS L028 - Surrendered (2).docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_surrender_cessation_email_template_for_ca_scotland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_SURRENDER_CESSATION" />
            <param name="fileDocumentName" value="ETS-P3-L022 - Cessation following surrender.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrendered_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_SURRENDERED_NOTICE" />
            <param name="fileDocumentName" value="L028 IN Surrendered UKETS NRW July 21.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_surrender_refused_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_SURRENDER_REJECTED_NOTICE" />
            <param name="fileDocumentName" value="L031 Surrender Refused.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_surrender_cessation_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_SURRENDER_CESSATION" />
            <param name="fileDocumentName" value="L022_Cessation_Following_Surrender test 1.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_REVOCATION" />
            <param name="fileDocumentName" value="L020_Revocation template IW 20201127 USE or Article 27a CLEAN.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_revocation_withdrawn_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_REVOCATION_WITHDRAWN" />
            <param name="fileDocumentName" value="L021 IN Revocation Withdrawn.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_revocation_cessation_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_REVOCATION_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation letter 20130724.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_REVOCATION" />
            <param name="fileDocumentName" value="L020 Revocation NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_revocation_withdrawn_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_REVOCATION_WITHDRAWN" />
            <param name="fileDocumentName" value="L021 Revocation Withdrawn NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_revocation_cessation_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_REVOCATION_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation NI MAr 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_email_template_for_ca_scotland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_REVOCATION" />
            <param name="fileDocumentName" value="ETS-03-L020 - Revocation P3 - USE.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_revocation_cessation_email_template_for_ca_scotland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_REVOCATION_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_REVOCATION" />
            <param name="fileDocumentName" value="L020 Revocation updated 22 12 20.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_revocation_withdrawn_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_REVOCATION_WITHDRAWN" />
            <param name="fileDocumentName" value="L021 Revocation Withdrawn.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_revocation_cessation_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_REVOCATION_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_notification_accepted_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_NOTIFICATION_ACCEPTED" />
            <param name="fileDocumentName" value="L010 IN Notification Accepted_20210204.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_notification_refused_email_template_for_ca_england_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_NOTIFICATION_REFUSED" />
            <param name="fileDocumentName" value="L011 IN Notification Refused_20210402.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_notification_accepted_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_NOTIFICATION_ACCEPTED" />
            <param name="fileDocumentName" value="L010_IN_Notification_Accepted_NI_UK Nov 2021.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_notification_refused_email_template_for_ca_northern_ireland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_NOTIFICATION_REFUSED" />
            <param name="fileDocumentName" value="L011 IN Notification Refused NI UK ETS feb 2021.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_notification_accepted_email_template_for_ca_scotland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_NOTIFICATION_ACCEPTED" />
            <param name="fileDocumentName" value="L010 IN Notification Accepted - UK ETS update doc FINAL.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_notification_refused_email_template_for_ca_scotland_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_NOTIFICATION_REFUSED" />
            <param name="fileDocumentName" value="L011 IN Notification Refused.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_notification_accepted_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_NOTIFICATION_ACCEPTED" />
            <param name="fileDocumentName" value="L010 IN Notification Accepted_20210204_NRW_HT.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    <changeSet id="0_1_0_update_permit_notification_refused_email_template_for_ca_wales_fix_address" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_NOTIFICATION_REFUSED" />
            <param name="fileDocumentName" value="L011 IN Notification Refused_20210402_NRW_HT.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrendered_template_for_ca_wales_fix_yours_faithfully" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_SURRENDERED_NOTICE" />
            <param name="fileDocumentName" value="L028 IN Surrendered UKETS NRW July 21.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_cessation_template_for_ca_england_fix_competent_authority_display" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_REVOCATION_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation letter 20130724.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_cessation_template_for_ca_scotland_fix_competent_authority_display" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_REVOCATION_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_revocation_withdrawn_template_for_ca_northern_ireland_fix_to_word" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_REVOCATION_WITHDRAWN" />
            <param name="fileDocumentName" value="L021 Revocation Withdrawn NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrender_deemed_withdrawn_template_for_ca_england_fix_syntax_in_missing_property" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="ENGLAND" />
            <param name="type" value="PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn - Final 05032013.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrender_deemed_withdrawn_template_for_ca_northern_ireland_fix_syntax_in_missing_property" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrender_deemed_withdrawn_template_for_ca_opred_fix_syntax_in_missing_property" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="type" value="PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrender_deemed_withdrawn_template_for_ca_wales_fix_syntax_in_missing_property" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="WALES" />
            <param name="type" value="PERMIT_SURRENDER_DEEMED_WITHDRAWN_NOTICE" />
            <param name="fileDocumentName" value="L132 Surrender Deemed Withdrawn.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrender_cessation_template_for_ca_opred_fix_signature" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="OPRED" />
            <param name="type" value="PERMIT_SURRENDER_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation Following Surrender OPRED.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrender_cessation_template_for_ca_scotland_fix_signature" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="SCOTLAND" />
            <param name="type" value="PERMIT_SURRENDER_CESSATION" />
            <param name="fileDocumentName" value="ETS-P3-L022 - Cessation following surrender.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>
    
    <changeSet id="0_1_0_update_permit_surrender_cessation_template_for_ca_northern_ireland_fix_permit_reference_text" author="P35066">
        <customChange class="uk.gov.pmrv.api.migration.initialdata.UpdateDocumentTemplateFileTaskChange">
            <param name="competentAuthority" value="NORTHERN_IRELAND" />
            <param name="type" value="PERMIT_SURRENDER_CESSATION" />
            <param name="fileDocumentName" value="L022 Cessation Following Surrender NI Mar 13.docx" />
        </customChange>
        <rollback></rollback>
    </changeSet>

    <changeSet id="0_1_0_INSERT_USER_FEEDBACK_NOTIFICATION_TEMPLATE" author="P63767">

        <comment>Insert record in notification_template Table for User Feedback email</comment>
        <sql>
            <![CDATA[
            INSERT INTO notification_template (
                id,
                name,
                subject,
                text)
            VALUES (
                   nextval('notification_template_seq'),
                   'UserFeedbackForService',
                   'New feedback received on PMRV',
                   '## Survey results:

 **Domain** ${domainUrl}
 **Time created** ${timestamp}
 - **User registration & 2FA**
     - Rating: ${userRegistrationRate}
     - Reason: ${userRegistrationRateReason}
 - **Online guidance & communication**
     - Rating: ${onlineGuidanceRate}
     - Reason: ${onlineGuidanceRateReason}
 - **Create accounts**
     - Rating: ${creatingAccountRate}
     - Reason: ${creatingAccountRateReason}
 - **On-boarding, Identity & security checks**
     - Rating: ${onBoardingRate}
     - Reason: ${onBoardingRateReason}
 - **View, search & respond to tasks**
     - Rating: ${tasksRate}
     - Reason: ${tasksRateReason}
 - **Overall experience**
     - Rating: ${satisfactionRate}
     - Reason: ${satisfactionRateReason}
 - **Improvement Suggestion**
     ${improvementSuggestion}
                   '
               )]]>;
        </sql>

        <rollback>
            <sql>
                DELETE FROM notification_template WHERE name = 'UserFeedbackForService';
            </sql>
        </rollback>

    </changeSet>

    <changeSet id="0_1_0_UPDATE_EMAIL_CONFIRMATION_NOTIFICATION_TEMPLATE_SUBJECT_AND_TEXT" author="pafilisa@unisystems.gr">
        <sql>
            UPDATE notification_template
            SET subject = 'Confirm your email address - Manage your UK ETS reporting',
                text = 'We received a request to create a sign in for the UK ETS reporting service.

Use this link to confirm your email:

[Confirm your email address](${emailConfirmationLink})

If you did not request this reporting service sign in you must [contact your regulator.](https://www.gov.uk/guidance/uk-ets-apply-for-an-emissions-monitoring-plan-emp#find-out-who-your-regulator-is)

This is an automatic email - please do not reply to this address.'
            WHERE name = 'EmailConfirmation';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template
                SET subject = 'Confirm your email address - PMRV',
                    text = 'Thank you for starting the registration process with Permitting, Monitoring, Reporting,
Verification system (PMRV).

To confirm your email address, please click on the following link:

[Verify your email address and continue with the registration process](${emailConfirmationLink})

If you did not request this verification email, contact the PMRV at info@pmrv.com.

Do not reply, this is an automatic email.'
                WHERE name = 'EmailConfirmation';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_UPDATE_USER_ACCOUNT_CREATED_NOTIFICATION_TEMPLATE_SUBJECT_AND_TEXT" author="pafilisa@unisystems.gr">
        <sql>
            UPDATE notification_template
            SET subject = 'User account created - Manage your UK ETS reporting',
            text = 'A UK ETS reporting service sign in has been created for ${userEmail}

You will be asked to provide this email address if you forget or want to change your password.

If you did not request this reporting service sign in you must [contact your regulator.](https://www.gov.uk/guidance/uk-ets-apply-for-an-emissions-monitoring-plan-emp#find-out-who-your-regulator-is)

This is an automatic email - please do not reply to this address.'
            WHERE name = 'UserAccountCreated';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template
                SET subject = 'User account created - PMRV',
                text = 'Dear ${userFirstName} ${userLastName},

This is to notify you that a user account has been created in PMRV for the below company contact details:

First name: ${userFirstName}

Last name: ${userLastName}

Email address: ${userEmail}

You will be asked to provide this email address if you forget your password or want to change your password.

Kind Regards,

PMRV Helpdesk'
                WHERE name = 'UserAccountCreated';
            </sql>
        </rollback>
    </changeSet>

    <changeSet id="0_1_0_UPDATE_ACCOUNT_APPLICATION_RECEIVED_NOTIFICATION_TEMPLATE_SUBJECT_AND_TEXT" author="pafilisa@unisystems.gr">
        <sql>
            UPDATE notification_template
            SET subject = 'Installation account application received - Manage your UK ETS reporting',
            text = 'We received your application to set up an installation account.

We’ll review your application and respond within 10 working days.

If you did not make this application you must [contact your regulator.](https://www.gov.uk/guidance/uk-ets-apply-for-an-emissions-monitoring-plan-emp#find-out-who-your-regulator-is)

This is an automatic email - please do not reply to this address.'
            WHERE name = 'AccountApplicationReceived';
        </sql>

        <rollback>
            <sql>
                UPDATE notification_template
                SET subject = 'PMRV account application received',
                text = 'Dear ${applicantFirstName} ${applicantLastName},

Thank you for applying to set up a PMRV account.

We’ll check your application, then let you know if you’ve been successful within 10 working days.

Regards,

${competentAuthorityName}'
                WHERE name = 'AccountApplicationReceived';
            </sql>
        </rollback>
    </changeSet>

</databaseChangeLog>